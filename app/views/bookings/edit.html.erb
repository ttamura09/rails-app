<% @page_title = t("bookings.show_page_title") %>
<h1><%= @page_title %></h1>
<table class="list">
  <tr>
    <th><%= t("bookings.table.airline_flight") %></th>
    <th><%= t("bookings.table.origin_destination") %></th>
    <th><%= t("bookings.table.date") %></th>
    <th><%= t("bookings.table.times") %></th>
    <th><%= t("bookings.table.class") %></th>
    <th><%= t("bookings.table.number_of_passengers") %></th>
    <th><%= t("bookings.table.total_price") %></th>
    <th><%= t("bookings.table.payment_method") %></th>
    <th><%= t("bookings.return_to_details") %></th>
  </tr>
  <tr>
    <td><%= @booking.flight.name %></td>
    <td><%= "#{@booking.flight.origin.name} → #{@booking.flight.destination.name}" %></td>
    <td><%= @booking.flight.departure_date.strftime("%Y/%m/%d") %></td>
    <td><%= "#{@booking.flight.departure_time.strftime("%H:%M")} → #{@booking.flight.arrival_time.strftime("%H:%M")}" %></td>
    <td><%= seat_class_map[@booking.seats.first.seat_class] %>
    <td><%= "#{@booking.seats.size}" %></td>
    <td><%= "¥#{@booking.total_price}" %></td>
    <td><%= @booking.payment_method %></td>
    <td><%= link_to t("bookings.return_to_details"), [:account, @booking] %></td>
  </tr>
</table>

<div class="booking-details">
  <h4>予約番号: <%= @booking.id %></h4>
  <h4>合計金額: <%= @booking.total_price %> 円</h4>
  <h4>支払い方法: <%= @booking.payment_method %></h4>

  <h3>予約されたフライトの詳細:</h3>

  <% @booking.booking_seat_flights.each do |booking_seat_flight| %>
    <div class="booking-seat-flight">
      <h5>乗客名: <%= booking_seat_flight.passenger_name %></h5>
      <p>生年月日: <%= booking_seat_flight.passenger_birthday %></p>
      <p>電話番号: <%= booking_seat_flight.passenger_telephone_number %></p>
      <p>メールアドレス: <%= booking_seat_flight.passenger_email %></p>
      <p>座席番号: <%= booking_seat_flight.seat.number %> ( <%= booking_seat_flight.seat.seat_class %> クラス)</p>
      <p>フライト名: <%= booking_seat_flight.flight.name %></p>
      <p>出発日時: <%= booking_seat_flight.flight.departure_date %> <%= booking_seat_flight.flight.departure_time.strftime("%H:%M") %></p>
      <p>到着日時: <%= booking_seat_flight.flight.arrival_date %> <%= booking_seat_flight.flight.arrival_time.strftime("%H:%M") %></p>
      <p>出発地: <%= booking_seat_flight.flight.origin.name %></p>
      <p>目的地: <%= booking_seat_flight.flight.destination.name %></p>
      <p>チェックイン状態: <%= booking_seat_flight.checkin ? '完了' : '未完了' %></p>
    </div>
    <hr>
  <% end %>
</div>
<%= form_for [:account, @booking] do |form| %>
  <%= render "shared/errors", obj: @booking %>
  <div><%= form.submit t("bookings.passenger.check_in") %></div>
<% end %>